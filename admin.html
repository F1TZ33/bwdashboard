<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<title>Admin</title>
<link href="assets/css/style.css" rel="stylesheet"/>
</head>
<body data-page="admin">
<div class="container">
<div class="siteHeader"><img alt="Bearing Wholesalers" class="siteLogo" src="assets/img/logo.png"/></div>
<div class="topbar">
<div class="leftBtns">
<a class="btn" href="index.html">← Back</a>
<a class="btn" href="index.html">⌂ Dashboard</a>
</div>
<div class="rightBtns">
<button class="btn" data-action="suggest" type="button">Suggest edit</button>
<button class="btn" data-action="devnote" data-editor-only="1" style="display:none" type="button">Dev notes</button>
<button class="btn" data-action="admin" title="Admin" type="button">Admin</button>
</div>
</div>
<div class="card" id="pwTools" style="margin-top:16px">
<div style="font-weight:900;margin-bottom:8px">Change admin password</div>
<div class="row">
<div class="field"><label>Current password</label><input id="ad_pw_current" type="password"/></div>
<div class="field"><label>New password</label><input id="ad_pw_new" type="password"/></div>
</div>
<div class="row">
<div class="field"><label>Confirm new password</label><input id="ad_pw_confirm" type="password"/></div>
<div class="field" style="display:flex;align-items:flex-end">
<button class="btn" id="ad_pw_save" type="button">Update password</button>
</div>
</div>
</div>
<div class="meta">Version: <strong>GitHub vFinal</strong> • Last updated: <strong>2026-02-08</strong></div>
<h1>Admin</h1>
<p class="subtitle">Local settings for this computer/browser. Log in to enable Editor Mode and export your saved text edits.</p>
<div class="card" id="adminGate">
<div style="font-weight:900;margin-bottom:8px">Admin login</div>
<p class="subtitle" style="margin-top:0">Password required to access admin tools.</p>
<div class="row">
<div class="field">
<label>Password</label>
<input id="ad_pw" placeholder="Enter password" type="password"/>
</div>
<div class="field" style="display:flex;align-items:flex-end">
<button class="btn" id="ad_login" type="button">Login</button>
</div>
</div>
</div>
<div class="card" id="adminPanel" style="display:none">
<div class="row">
<div class="field"><label>Suggestion email (To)</label><input id="ad_to"/></div>
<div class="field"><label>Email subject tag</label><input id="ad_tag"/></div>
</div>
<div class="row">
<div class="field"><label>User version</label><input id="ad_version"/></div>
<div class="field"><label>Last updated</label><input id="ad_last" placeholder="e.g., 2026-02-03"/></div>
</div>
<div class="row">
<div class="field">
<label>Editor Mode</label>
<div style="display:flex;gap:10px;align-items:center;margin-top:8px">
<input id="ad_editor" type="checkbox"/>
<span class="subtitle" style="margin:0">Enable on-page text editing (admin session only).</span>
</div>
</div>
<div class="field">
<label>Saved edits</label>
<div class="subtitle" style="margin:8px 0 0">
        Edits stored: <strong data-admin="editCount">0</strong><br/>
        Last edit: <strong data-admin="lastEdit">—</strong>
</div>
</div>
</div>
<div class="actions">
<button class="btn" id="ad_save" type="button">Save settings</button>
<button class="smallbtn" id="ad_export" type="button">Export changes</button>
<button class="smallbtn" id="ad_clear" type="button">Clear local edits</button>
<button class="smallbtn" id="ad_logout" type="button">Logout</button>
</div>
</div>
<label>Edit Request Email:</label><input id="supportEmail" placeholder="support@yourcompany.com" style="width:300px;margin-left:10px;" type="email"/><button class="btn" id="saveSupportEmail">Save</button><button class="btn">Save</button>
<script>
document.addEventListener("DOMContentLoaded", function(){
  var input = document.getElementById("supportEmail");
  var btn = document.getElementById("saveSupportEmail");
  if(!input || !btn) return;
  var stored = localStorage.getItem("supportEmail");
  if(stored) input.value = stored;
  btn.addEventListener("click", function(){
    localStorage.setItem("supportEmail", (input.value || "").trim());
    alert("Saved");
  });
});
</script>
<div class="card" id="storeTemplatesCard">
<h2>Supplier Templates (Stores)</h2>
<p style="opacity:.85;margin-top:6px;">
    Admin controls which store templates exist. All users can view all templates and switch store from the Product Guide page.
    Edits to supplier lists are shared by updating <code>docs/suppliers.json</code> in GitHub.
  </p>
<div style="display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin-top:12px;">
<label for="adminStoreList" style="min-width:160px;"><strong>Existing Stores</strong></label>
<select id="adminStoreList" style="min-width:260px;"></select>
</div>
<hr style="opacity:.2;margin:16px 0;"/>
<div style="display:flex; gap:10px; flex-wrap:wrap; align-items:center;">
<label for="newStoreName" style="min-width:160px;"><strong>Add Store</strong></label>
<input id="newStoreName" placeholder="e.g. Yarra Junction" style="min-width:260px;" type="text"/>
<button class="btn" id="addStore">Add</button>
</div>
<div style="display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin-top:10px;">
<label for="renameStoreFrom" style="min-width:160px;"><strong>Rename Store</strong></label>
<select id="renameStoreFrom" style="min-width:260px;"></select>
<input id="renameStoreTo" placeholder="New name" style="min-width:260px;" type="text"/>
<button class="btn" id="renameStore">Rename</button>
</div>
<div style="display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin-top:10px;">
<label for="deleteStoreName" style="min-width:160px;"><strong>Delete Store</strong></label>
<select id="deleteStoreName" style="min-width:260px;"></select>
<button class="btn" id="deleteStore">Delete</button>
</div>
<hr style="opacity:.2;margin:16px 0;"/>
<div style="display:flex; gap:10px; flex-wrap:wrap; align-items:center;">
<button class="btn" id="downloadSuppliersJson">Download Updated suppliers.json</button>
<span style="opacity:.75;">Upload it to <code>docs/suppliers.json</code> in GitHub to share changes.</span>
</div>
</div>
</div>
<div class="modalBack" id="suggestModal">
<div class="modal">
<h3>Suggest edit</h3>
<p class="subtitle" style="margin:0 0 10px">This creates an email draft to the manual admin. You’ll still click Send in your email app.</p>
<div class="row">
<div class="field">
<label>Your name (required)</label>
<input id="se_name" placeholder="e.g., Jordan"/>
</div>
<div class="field">
<label>Urgency (optional)</label>
<select id="se_urgency">
<option value="">—</option>
<option>Low</option><option>Medium</option><option>High</option>
</select>
</div>
</div>
<div class="field">
<label>Suggestion (required)</label>
<textarea id="se_suggestion" placeholder="What should change? Be specific if possible."></textarea>
</div>
<div class="field" data-editor-field="1" style="display:none">
<label>Section / location (optional)</label>
<input id="se_section" placeholder="Where on the page does this apply?"/>
</div>
<div class="field" data-editor-field="1" style="display:none">
<label>Proposed replacement wording (optional)</label>
<textarea id="se_replacement" placeholder="Paste the new wording here (optional)."></textarea>
</div>
<div class="field" data-editor-field="1" style="display:none">
<label>Reason / context (optional)</label>
<textarea id="se_reason" placeholder="Why should this change? Any customer context?"></textarea>
</div>
<input id="se_page" type="hidden"/>
<input id="se_path" type="hidden"/>
<input id="se_time" type="hidden"/>
<div class="actions">
<button class="btn" id="se_send" type="button">Confirm &amp; create email</button>
<button class="smallbtn" data-close="suggestModal" type="button">Cancel</button>
</div>
</div>
</div>
<div class="modalBack" id="devNoteModal">
<div class="modal">
<h3>Developer notes (private)</h3>
<p class="subtitle" style="margin:0 0 10px">Saved locally on this computer/browser. Not visible to normal users.</p>
<div class="field">
<label>Page</label>
<input id="dn_path" readonly=""/>
</div>
<div class="field">
<label>Notes</label>
<textarea id="dn_note" placeholder="Private admin notes for this page…"></textarea>
</div>
<div class="actions">
<button class="btn" id="dn_save" type="button">Save notes</button>
<button class="smallbtn" data-close="devNoteModal" type="button">Close</button>
</div>
</div>
</div>
<script src="assets/js/app.js"></script>
<script>
    (function(){
      try{
        const raw = localStorage.getItem('bwproguide.settings');
        const s = raw ? JSON.parse(raw) : {};
        const v = s.version || 'v3';
        const lu = s.lastUpdated || '';
        document.querySelectorAll('[data-meta="version"]').forEach(el=>el.textContent=v);
        document.querySelectorAll('[data-meta="lastUpdated"]').forEach(el=>el.textContent=lu || '—');
      }catch(e){}
    })();
  </script>
</body>
</html>