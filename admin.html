<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin</title>
  <link rel="stylesheet" href="assets/css/style.css" />
</head>
<body data-page="admin">
  <div class="container">
    <div class="siteHeader"><img class="siteLogo" src="assets/img/logo.png" alt="Bearing Wholesalers" /></div>

<div class="topbar">
  <div class="leftBtns">
    <a class="btn" href="index.html">← Back</a>
    <a class="btn" href="index.html">⤒ Intro</a>
  </div>
  <div class="rightBtns">
    <button class="btn" data-action="suggest" type="button">Suggest edit</button>
    <button class="btn" data-action="devnote" data-editor-only="1" style="display:none" type="button">Dev notes</button>
    <button class="btn" data-action="admin" type="button" title="Admin">Admin</button>
  </div>
</div>

<div class="card" style="margin-top:16px" id="pwTools">
  <div style="font-weight:900;margin-bottom:8px">Change admin password</div>
  <div class="row">
    <div class="field"><label>Current password</label><input id="ad_pw_current" type="password" /></div>
    <div class="field"><label>New password</label><input id="ad_pw_new" type="password" /></div>
  </div>
  <div class="row">
    <div class="field"><label>Confirm new password</label><input id="ad_pw_confirm" type="password" /></div>
    <div class="field" style="display:flex;align-items:flex-end">
      <button class="btn" id="ad_pw_save" type="button">Update password</button>
    </div>
  </div>
</div>


    <div class='meta'>Version: <span data-meta='version'></span> • Last updated: <span data-meta='lastUpdated'></span></div>
    

<h1>Admin</h1>
<p class="subtitle">Local settings for this computer/browser. Log in to enable Editor Mode and export your saved text edits.</p>

<div class="card" id="adminGate">
  <div style="font-weight:900;margin-bottom:8px">Admin login</div>
  <p class="subtitle" style="margin-top:0">Password required to access admin tools.</p>
  <div class="row">
    <div class="field">
      <label>Password</label>
      <input id="ad_pw" type="password" placeholder="Enter password" />
    </div>
    <div class="field" style="display:flex;align-items:flex-end">
      <button class="btn" id="ad_login" type="button">Login</button>
    </div>
  </div>
</div>

<div class="card" id="adminPanel" style="display:none">
  <div class="row">
    <div class="field"><label>Suggestion email (To)</label><input id="ad_to" /></div>
    <div class="field"><label>Email subject tag</label><input id="ad_tag" /></div>
  </div>
  <div class="row">
    <div class="field"><label>User version</label><input id="ad_version" /></div>
    <div class="field"><label>Last updated</label><input id="ad_last" placeholder="e.g., 2026-02-03" /></div>
  </div>

  <div class="row">
    <div class="field">
      <label>Editor Mode</label>
      <div style="display:flex;gap:10px;align-items:center;margin-top:8px">
        <input type="checkbox" id="ad_editor" />
        <span class="subtitle" style="margin:0">Enable on-page text editing (admin session only).</span>
      </div>
    </div>
    <div class="field">
      <label>Saved edits</label>
      <div class="subtitle" style="margin:8px 0 0">
        Edits stored: <strong data-admin="editCount">0</strong><br/>
        Last edit: <strong data-admin="lastEdit">—</strong>
      </div>
    </div>
  </div>

  <div class="actions">
    <button class="btn" id="ad_save" type="button">Save settings</button>
    <button class="smallbtn" id="ad_export" type="button">Export changes</button>
    <button class="smallbtn" id="ad_clear" type="button">Clear local edits</button>
    <button class="smallbtn" id="ad_logout" type="button">Logout</button>
  </div>
</div>


  </div>
  
<div class="modalBack" id="suggestModal">
  <div class="modal">
    <h3>Suggest edit</h3>
    <p class="subtitle" style="margin:0 0 10px">This creates an email draft to the manual admin. You’ll still click Send in your email app.</p>
    <div class="row">
      <div class="field">
        <label>Your name (required)</label>
        <input id="se_name" placeholder="e.g., Jordan" />
      </div>
      <div class="field">
        <label>Urgency (optional)</label>
        <select id="se_urgency">
          <option value="">—</option>
          <option>Low</option><option>Medium</option><option>High</option>
        </select>
      </div>
    </div>
    <div class="field">
      <label>Suggestion (required)</label>
      <textarea id="se_suggestion" placeholder="What should change? Be specific if possible."></textarea>
    </div>

    <div class="field" data-editor-field="1" style="display:none">
      <label>Section / location (optional)</label>
      <input id="se_section" placeholder="Where on the page does this apply?" />
    </div>
    <div class="field" data-editor-field="1" style="display:none">
      <label>Proposed replacement wording (optional)</label>
      <textarea id="se_replacement" placeholder="Paste the new wording here (optional)."></textarea>
    </div>
    <div class="field" data-editor-field="1" style="display:none">
      <label>Reason / context (optional)</label>
      <textarea id="se_reason" placeholder="Why should this change? Any customer context?"></textarea>
    </div>

    <input type="hidden" id="se_page" />
    <input type="hidden" id="se_path" />
    <input type="hidden" id="se_time" />

    <div class="actions">
      <button class="btn" id="se_send" type="button">Confirm & create email</button>
      <button class="smallbtn" data-close="suggestModal" type="button">Cancel</button>
    </div>
  </div>
</div>

<div class="modalBack" id="devNoteModal">
  <div class="modal">
    <h3>Developer notes (private)</h3>
    <p class="subtitle" style="margin:0 0 10px">Saved locally on this computer/browser. Not visible to normal users.</p>
    <div class="field">
      <label>Page</label>
      <input id="dn_path" readonly />
    </div>
    <div class="field">
      <label>Notes</label>
      <textarea id="dn_note" placeholder="Private admin notes for this page…"></textarea>
    </div>
    <div class="actions">
      <button class="btn" id="dn_save" type="button">Save notes</button>
      <button class="smallbtn" data-close="devNoteModal" type="button">Close</button>
    </div>
  </div>
</div>

  <script src="assets/js/app.js"></script>
  <script>
    (function(){
      try{
        const raw = localStorage.getItem('bwproguide.settings');
        const s = raw ? JSON.parse(raw) : {};
        const v = s.version || 'v3';
        const lu = s.lastUpdated || '';
        document.querySelectorAll('[data-meta="version"]').forEach(el=>el.textContent=v);
        document.querySelectorAll('[data-meta="lastUpdated"]').forEach(el=>el.textContent=lu || '—');
      }catch(e){}
    })();
  </script>
</body>
</html>